{"version":3,"sources":["contact.js"],"names":["express","require","router","Router","uniqueValidator","Contact","get","req","res","next","render","contact","post","body","firstname","lastname","comment","errorArray","Object","keys","err","errors","key","push","message","errorKeys","forEach","redirect","data","params","email1","findOne","email","userdat","log","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,SAAUC,QAAQ,YAGhBG,gBAAkBH,QAAQ,6BAE1BI,QAAUJ,QAAQ,qBAAqBI,QAE5CH,OAAOI,IAAI,IAAK,SAAUC,EAAKC,EAAKC,GAEjCD,EAAIE,OAAO,aAAXF,OAAIE,KAAJ,IAAW,SAAXH,EAAAC,EAAAC,GAMF,IAAME,EAAU,IAAIN,QAFtBH,EAAOU,UAAUL,EAAAM,KAAAC,UACfH,EAAAI,SAAAR,EAAAM,KAAAE,SACAJ,EAAMA,MAAUJ,EAAIF,KAAAA,MACpBM,EAAQG,QAARP,EAAoBA,KAAIM,QACxBF,EAAQI,KAAAA,SAAAA,GAERJ,GAAAA,EAAQK,CAEN,IAAAC,EAAA,GAIE,OAHOC,OAAAC,KAAAC,EAAAC,QAEDJ,QAAa,SAAAK,GAAnB,OAAAL,EAAAM,KAAAH,EAAAC,OAAAC,GAAAE,WACMC,EAAAA,OAAYP,UAAYE,CAC9BK,OAAUC,IACVlB,EAAAmB,SAAWjB,iBAIbF,OAAGF,IAACqB,WAAS,SAAbpB,EAAAC,EAAAC,GACD,IAZDmB,EAAArB,EAAAsB,OAAAC,OAPFzB,QAsBA0B,QAAA,CAAAC,MAAAJ,GAAA,SAAAR,EAAAT,GAIGH,EAAIE,OAAO,YAAa,CAAEuB,QAAQtB,IAHrCT,QAAWgC,IAAAvB,EAAYK,aAGpBR,OAAG2B,QAAQjC","file":"contact.min.js","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nconst mongoose = require(\"mongoose\");\r\nconst uniqueValidator = require(\"mongoose-unique-validator\");\r\n\r\nconst Contact = require('../models/contact').Contact;\r\n\r\n router.get('/', function (req, res, next) {\r\n  \r\n    res.render('contact');\r\n  });\r\n\r\n// To create a new database entry\r\nrouter.post('/', function (req, res, next) {\r\n  // const = new Contact(req.body);\r\n  const contact = new Contact();\r\n  contact.firstname = req.body.firstname\r\n  contact.lastname= req.body.lastname\r\n  contact.email= req.body.email\r\n  contact.comment= req.body.comment\r\n  contact.save(err => {\r\n    // if(err) throw err;\r\n    if (err) {\r\n     \r\n      const errorArray = [];\r\n      const errorKeys = Object.keys(err.errors);\r\n      errorKeys.forEach(key => errorArray.push(err.errors[key].message));\r\n      return res.render(\"contact\", {\r\n        errors: errorArray\r\n      });\r\n    }\r\n    res.redirect(\"/thankyou\");\r\n  });\r\n});\r\n\r\n// Shows a single contact\r\nrouter.get('/:email1', function (req, res, next) {\r\n  const data = req.params.email1;\r\n  Contact.findOne({ email: data }, (err, contact) => {\r\n   res.render('user-data', { userdat:contact });\r\n    console.log(contact.comment);\r\n    //console.log(userdat);\r\n  });\r\n});\r\n\r\nmodule.exports = router;\r\n\r\n"]}