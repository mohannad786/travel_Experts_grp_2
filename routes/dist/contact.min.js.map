{"version":3,"sources":["contact.js"],"names":["express","require","router","Router","Contact","req","res","next","post","contact","firstname","body","lastname","email","err","save","errorArray","errorKeys","Object","keys","errors","key","message","forEach","get","data","params","email1","findOne","userdat","console","log"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,QAAUC,QAAQ,qBAAtBG,QACAF,OAAIA,IAAM,IAAGF,SAAAK,EAAbC,EAAAC,GACMH,EAAAA,OAAUH,aAKbC,OAEHM,KAAA,IAAA,SAAAH,EAAAC,EAAAC,GACAL,IAAOM,EAAU,IAAAJ,QACfK,EAAAC,UAAAL,EAAAM,KAAAD,UACAD,EAAMA,SAAcL,EAAAA,KAApBQ,SACAH,EAAQC,MAAAA,EAARC,KAAwBA,MACxBF,EAAQG,QAARP,EAAkBA,KAAIM,QACtBF,EAAQI,KAAR,SAAAC,GAEAL,GAAAA,EAAQM,CAEN,IAAAC,EAAS,GAIPC,OAFmBC,OAAnBC,KAAAL,EAAAM,QACMH,QAAYC,SAAAA,GAAAA,OAAOC,EAASC,KAAlCN,EAAAM,OAAAC,GAAAC,WACAL,EAAUM,OAAQ,UAAAF,CAAGD,OAAIJ,IAEvBI,EAAAA,SAAQJ,iBAIbd,OAZDsB,IAAA,WAAA,SAAAnB,EAAAC,EAAAC,GAPF,IAsBAkB,EAAApB,EAAAqB,OAAAC,OAGEvB,QAAQwB,QAAQ,CAAEf,MAAOY,GAAQ,SAACX,EAAKL,GAFzCP,EAAOsB,OAAI,YAAY,CAAAK,QAAApB,IACrBqB,QAAUC,IAAMtB,EAAQkB,aAEGE,OAAAA,QAAQpB","file":"contact.min.js","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nconst Contact = require('../models/contact').Contact;\r\n\r\n router.get('/', function (req, res, next) {\r\n  \r\n    res.render('contact');\r\n  });\r\n\r\n// To create a new database entry\r\nrouter.post('/', function (req, res, next) {\r\n  // const = new Contact(req.body);\r\n  const contact = new Contact();\r\n  contact.firstname = req.body.firstname\r\n  contact.lastname= req.body.lastname\r\n  contact.email= req.body.email\r\n  contact.comment= req.body.comment\r\n  contact.save(err => {\r\n    // if(err) throw err;\r\n    if (err) {\r\n     \r\n      const errorArray = [];\r\n      const errorKeys = Object.keys(err.errors);\r\n      errorKeys.forEach(key => errorArray.push(err.errors[key].message));\r\n      return res.render(\"contact\", {\r\n        errors: errorArray\r\n      });\r\n    }\r\n    res.redirect(\"/thankyou\");\r\n  });\r\n});\r\n\r\n// Shows a single contact\r\nrouter.get('/:email1', function (req, res, next) {\r\n  const data = req.params.email1;\r\n  Contact.findOne({ email: data }, (err, contact) => {\r\n   res.render('user-data', { userdat:contact });\r\n    console.log(contact.comment);\r\n    //console.log(userdat);\r\n  });\r\n});\r\n\r\nmodule.exports = router;\r\n\r\n"]}